<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dopeness Selecta Player</title>
    <style>
        :root {
            --bg-dark: #121212;
            --bg-panel: #181818;
            --bg-hover: #282828;
            --text-main: #ffffff;
            --text-sub: #b3b3b3;
            --accent: #1db954;
        }

        body {
            margin: 0;
            background-color: var(--bg-dark);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* --- Main Layout --- */
        .main-view {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        /* Sidebar / Playlist Area */
        .sidebar {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: linear-gradient(180deg, #2a2a2a 0%, var(--bg-dark) 40%);
        }

        .header {
            padding: 24px;
            background: rgba(0,0,0,0.3);
            border-bottom: 1px solid #282828;
            flex-shrink: 0;
        }

        .header h1 { margin: 0; font-size: 24px; letter-spacing: -0.5px; }
        .header p { margin: 5px 0 0; color: var(--text-sub); font-size: 14px; }

        .playlist-container {
            flex: 1;
            overflow-y: auto;
            padding: 10px 0;
        }

        /* Scrollbar Styling */
        .playlist-container::-webkit-scrollbar { width: 12px; }
        .playlist-container::-webkit-scrollbar-track { background: var(--bg-dark); }
        .playlist-container::-webkit-scrollbar-thumb { background-color: #555; border-radius: 6px; border: 3px solid var(--bg-dark); }

        table { width: 100%; border-collapse: collapse; table-layout: fixed; }
        
        tr { height: 56px; transition: background 0.2s; cursor: pointer; border-bottom: 1px solid #222; }
        tr:hover { background-color: var(--bg-hover); }
        tr.active { background-color: #2a2a2a; color: var(--accent); }
        tr.active .track-num { color: var(--accent); }

        td { padding: 0 16px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .track-num { width: 40px; text-align: center; color: var(--text-sub); font-variant-numeric: tabular-nums; }
        .track-title { font-weight: 500; font-size: 16px; }

        /* --- Player Controls (Bottom Bar) --- */
        .player-bar {
            height: 90px;
            background-color: var(--bg-panel);
            border-top: 1px solid #282828;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            flex-shrink: 0;
            z-index: 10;
        }

        /* Track Info (Left) */
        .now-playing { width: 30%; min-width: 180px; }
        .np-title { font-size: 14px; font-weight: 600; margin-bottom: 4px; color: #fff; }
        .np-status { font-size: 11px; color: var(--text-sub); text-transform: uppercase; letter-spacing: 1px; }

        /* Controls (Center) */
        .controls-wrapper { width: 40%; max-width: 722px; display: flex; flex-direction: column; align-items: center; }
        
        .buttons { display: flex; align-items: center; gap: 24px; margin-bottom: 8px; }
        
        button {
            background: none; border: none; color: var(--text-sub);
            cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center;
        }
        button:hover { color: #fff; transform: scale(1.05); }
        button:active { transform: scale(0.95); }
        
        .btn-main { width: 32px; height: 32px; font-size: 18px; }
        .btn-play { 
            width: 36px; height: 36px; border-radius: 50%; 
            background: #fff; color: #000; font-size: 16px; 
            padding-left: 2px; /* optical centering for play icon */
        }
        .btn-play:hover { background: #f0f0f0; color: #000; transform: scale(1.05); }

        .btn-skip { font-size: 12px; font-weight: bold; border: 1px solid #444; border-radius: 4px; padding: 2px 6px; }
        .btn-skip:hover { border-color: #fff; }

        /* Progress Bar */
        .progress-area { width: 100%; display: flex; align-items: center; gap: 8px; font-size: 11px; color: var(--text-sub); font-variant-numeric: tabular-nums; }
        
        input[type=range] {
            -webkit-appearance: none; background: transparent; flex: 1; height: 4px; cursor: pointer; border-radius: 2px;
        }
        input[type=range]::-webkit-slider-runnable-track { background: #535353; height: 4px; border-radius: 2px; }
        input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; height: 12px; width: 12px; background: #fff; border-radius: 50%; margin-top: -4px; box-shadow: 0 2px 4px rgba(0,0,0,0.5); opacity: 0; transition: opacity 0.2s; }
        .progress-area:hover input[type=range]::-webkit-slider-thumb { opacity: 1; }
        .progress-area:hover input[type=range]::-webkit-slider-runnable-track { background: var(--accent); }

        /* Volume (Right) - Visual only for this layout */
        .volume-area { width: 30%; display: flex; justify-content: flex-end; color: var(--text-sub); }
    </style>
</head>
<body>

    <div class="main-view">
        <div class="sidebar">
            <div class="header">
                <h1>Dopeness Selecta</h1>
                <p>94.0 FM Radio Campus Toulouse</p>
                <p style="margin-top: 5px; font-size: 12px; color: #666;">124 Tracks Loaded</p>
            </div>
            <div class="playlist-container">
                <table id="trackTable">
                    </table>
            </div>
        </div>
    </div>

    <div class="player-bar">
        <div class="now-playing">
            <div class="np-title" id="currentTitle">Select a track to play</div>
            <div class="np-status" id="playStatus">Stopped</div>
        </div>

        <div class="controls-wrapper">
            <div class="buttons">
                <button class="btn-skip" onclick="skip(-60)" title="Rewind 1 Minute">- 1m</button>
                
                <button class="btn-main" onclick="playPrev()">‚èÆ</button>
                <button class="btn-play" onclick="togglePlay()" id="playBtn">‚ñ∂</button>
                <button class="btn-main" onclick="playNext()">‚è≠</button>

                <button class="btn-skip" onclick="skip(60)" title="Forward 1 Minute">+ 1m</button>
            </div>

            <div class="progress-area">
                <span id="currTime">0:00</span>
                <input type="range" id="progressBar" value="0" min="0" max="100" oninput="seek()">
                <span id="totTime">0:00</span>
            </div>
        </div>

        <div class="volume-area">
            <span title="Volume">üîä</span>
        </div>
    </div>

    <audio id="audio" preload="none"></audio>

    <script>
        // --- 1. THE DATA ---
        // Extracted from the source code provided
        const tracks = [
            { t: "EMISSION 146 10DEC17", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 146 10DEC17.mp3" },
            { t: "EMISSION 145 03DEC17", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 145 03DEC17.mp3" },
            { t: "EMISSION 144 26NOV17", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 144 26NOV17.mp3" },
            { t: "EMISSION 143 12FEV17", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 143 12FEV17.mp3" },
            { t: "EMISSION 142 01JAN17", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 142 01JAN17.mp3" },
            { t: "EMISSION 141 04DEC16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 141 04DEC16.mp3" },
            { t: "EMISSION 140 27NOV16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 140 27NOV16.mp3" },
            { t: "EMISSION 139 12NOV16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 139 12NOV16.mp3" },
            { t: "EMISSION 138 5NOV16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 138 5NOV16.mp3" },
            { t: "EMISSION 137 30OCT16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 137 30OCT16.mp3" },
            { t: "EMISSION 136 9OCT16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 136 9OCT16.mp3" },
            { t: "EMISSION 135 18SEPT16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 135 18SEPT16.mp3" },
            { t: "EMISSION 134 7AOUT16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 134 7AOUT16.mp3" },
            { t: "EMISSION 133 24JUILLET16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 133 24JUILLET16.mp3" },
            { t: "EMISSION 132 26JUIN16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 132 26JUIN16.mp3" },
            { t: "EMISSION 131 5JUIN16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 131 5JUIN16.mp3" },
            { t: "EMISSION 130 29MAI16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 130 29MAI16.mp3" },
            { t: "EMISSION 129 22MAI16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 129 22MAI16.mp3" },
            { t: "EMISSION 128 08MAI16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 128 08MAI16.mp3" },
            { t: "EMISSION 127 17AVRIL16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 127 17AVRIL16.mp3" },
            { t: "EMISSION 126 10AVRIL16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 126 10AVRIL16.mp3" },
            { t: "EMISSION 125 03AVRIL16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 125 03AVRIL16.mp3" },
            { t: "EMISSION 124 20MARS16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 124 20MARS16.mp3" },
            { t: "EMISSION 123 13MARS16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 123 13MARS16.mp3" },
            { t: "EMISSION 122 06MARS16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 122 06MARS16.mp3" },
            { t: "EMISSION 121 28FEV16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 121 28FEV16.mp3" },
            { t: "EMISSION 120 21FEV16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 120 21FEV16.mp3" },
            { t: "EMISSION 119 14FEV16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 119 14FEV16.mp3" },
            { t: "EMISSION 118 07FEV16", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 118 07FEV16.mp3" },
            { t: "EMISSION 117 24JAN15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 117 24JAN15.mp3" },
            { t: "EMISSION 116 17JAN15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 116 17JAN15.mp3" },
            { t: "EMISSION 115 10JAN15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 115 10JAN15.mp3" },
            { t: "EMISSION 114 03JAN15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 114 03JAN15.mp3" },
            { t: "EMISSION 113 27DEC15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 113 27DEC15.mp3" },
            { t: "EMISSION 112 13DEC15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 112 13DEC15.mp3" },
            { t: "EMISSION 111 06DEC15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 111 06DEC15.mp3" },
            { t: "EMISSION 110 29NOV15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 110 29NOV15.mp3" },
            { t: "EMISSION 109 22NOV15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 109 22NOV15.mp3" },
            { t: "EMISSION 108 15NOV15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 108 15NOV15.mp3" },
            { t: "EMISSION 107 01NOV15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 107 01NOV15.mp3" },
            { t: "EMISSION 106 25OCT15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 106 25OCT15.mp3" },
            { t: "EMISSION 105 11OCT15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 105 11OCT15.mp3" },
            { t: "EMISSION 104 04OCT15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 104 04OCT15.mp3" },
            { t: "EMISSION 103 27SEPT15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 103 27SEPT15.mp3" },
            { t: "EMISSION 102 20SEPT15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 102 20SEPT15.mp3" },
            { t: "EMISSION 101 13SEPT15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 101 13SEPT15.mp3" },
            { t: "EMISSION SUMMER 02 30AOUT15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA SUMMER 02 30AOUT15.mp3" },
            { t: "EMISSION SUMMER 01 12JULY15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA SUMMER 01 12JULY15.mp3" },
            { t: "EMISSION 100 14JUIN15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 100 14JUIN15.mp3" },
            { t: "EMISSION 99 17MAI15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 99 17MAI15.mp3" },
            { t: "EMISSION 98 10MAI15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 98 10MAI15.mp3" },
            { t: "EMISSION 97 03MAI15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 97 03MAI15.mp3" },
            { t: "EMISSION 96 26AVRIL15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 96 26AVRIL15.mp3" },
            { t: "EMISSION 95 19AVRIL15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 95 19AVRIL15.mp3" },
            { t: "EMISSION 94 12AVRIL15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 94 12AVRIL15.mp3" },
            { t: "EMISSION 93 22MAR15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 93 22MAR15.mp3" },
            { t: "EMISSION 92 15MAR15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 92 15MAR15.mp3" },
            { t: "EMISSION 91 08MAR15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 91 08MAR15.mp3" },
            { t: "EMISSION 90 01MAR15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 90 - 01MAR15.mp3" },
            { t: "EMISSION 89 22FEV15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 89 - 22FEV15.mp3" },
            { t: "EMISSION 88 15FEV15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 88 - 15FEV15.mp3" },
            { t: "EMISSION 86 25JAN15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 86 - 25JAN15.mp3" },
            { t: "EMISSION 85 18JAN15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 85 - 18JAN15.mp3" },
            { t: "EMISSION 84 11JAN15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 84 - 11JAN15.mp3" },
            { t: "EMISSION 83 4JAN15", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 83 - 4JAN15.mp3" },
            { t: "EMISSION 82 27Dec14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 82 - 27Dec14.mp3" },
            { t: "EMISSION 81 21DEC14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 81 - 21DEC14.mp3" },
            { t: "EMISSION 80 14DEC14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 80 - 14DEC14.mp3" },
            { t: "EMISSION 79 07DEC14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 79 - 07DEC14.mp3" },
            { t: "EMISSION 78 23NOV14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 78 - 23NOV14.mp3" },
            { t: "EMISSION 77 6NOV14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 77 - 6NOV14.mp3" },
            { t: "EMISSION 76 02NOV14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 76 - 02NOV14.mp3" },
            { t: "EMISSION 75 26OCT14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 75 - 26OCT14.mp3" },
            { t: "EMISSION 74 19OCT14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 74 - 19OCT14.mp3" },
            { t: "EMISSION 73 MAJIN 12OCT14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 73 MAJIN - 12OCT14.mp3" },
            { t: "EMISSION 72 05OCT14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 72 - 05OCT14.mp3" },
            { t: "EMISSION 71 28SEPT14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA - EMISSION 71 28SEPT14.mp3" },
            { t: "EMISSION 70 21SEPT14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 70 - 21SEPT14.mp3" },
            { t: "EMISSION 69 14SEPT14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 69 - 14SEPT14.mp3" },
            { t: "EMISSION 67 DIM3AOUT14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 67 DIM3AOUT14.mp3" },
            { t: "EMISSION 66 27JUILLET14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 66 27JUILLET14.mp3" },
            { t: "EMISSION 65 06JUILLET14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 65 06JUILLET14.mp3" },
            { t: "EMISSION 64 29JUIN14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 64 - 29JUIN14.mp3" },
            { t: "EMISSION 63 15JUIN14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 63 - 15JUIN14.mp3" },
            { t: "EMISSION 62 8JUIN14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 62 - 8JUIN14.mp3" },
            { t: "EMISSION 61 25MAI14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 61 - 25MAI14.mp3" },
            { t: "EMISSION 60 18MAI14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 60 - 18MAI14.mp3" },
            { t: "EMISSION 59 11MAI14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 59 - 11MAI14.mp3" },
            { t: "EMISSION 58 27AVR14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 58 - 27AVR14.mp3" },
            { t: "EMISSION 57 13AVR14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 57 - 13AVR14.mp3" },
            { t: "EMISSION 56 6AVR14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 56 - 6AVR14.mp3" },
            { t: "EMISSION 55 23MARS14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 55 - 23MARS14.mp3" },
            { t: "EMISSION 54 16MARS14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 54 - 16MARS14.mp3" },
            { t: "EMISSION 53 02MARS14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 53 - 02MARS14.mp3" },
            { t: "EMISSION 52 23FEV14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 52 - 23FEV14.mp3" },
            { t: "EMISSION 51 16FEV14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 51 - 16FEV14.mp3" },
            { t: "EMISSION 50 09FEV14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 50 - 09FEV14.mp3" },
            { t: "EMISSION 49Bis 02FEV14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 49Bis - 02FEV14.mp3" },
            { t: "EMISSION 49 26JAN14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 49 - 26JAN14.mp3" },
            { t: "EMISSION 48 19JAN14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 48 - 19JAN14.mp3" },
            { t: "EMISSION 47 05JAN14", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 47 - 05JAN14.mp3" },
            { t: "EMISSION 46 28DEC13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 46 - 28DEC13.mp3" },
            { t: "EMISSION 45 22DEC13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 45 - 22DEC13.mp3" },
            { t: "EMISSION 44 15DEC13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 44 - 15DEC13.mp3" },
            { t: "EMISSION 43 08DEC13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 43 - 08DEC13.mp3" },
            { t: "EMISSION 42 01DEC13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 42 - 01DEC13.mp3" },
            { t: "EMISSION 41 17NOV13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 41 - 17NOV13.mp3" },
            { t: "EMISSION 40 03NOV13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 40 - 03NOV13.mp3" },
            { t: "EMISSION 39 27OCT13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 39 - 27OCT13.mp3" },
            { t: "EMISSION 38 06OCT13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 38 - 06OCT13.mp3" },
            { t: "EMISSION 37 29SEPT13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS SELECTA 37 - 29SEPT13.mp3" },
            { t: "EMISSION 36 22SEPT13", u: "http://dopenessselecta.free.fr/mp3/DOPENESS%20SELECTA%2036%20-%2022SEPT13.mp3" },
            { t: "EMISSION 33 23 Juin", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2033%2023%20juin.mp3" },
            { t: "EMISSION 32 16 Juin", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2032%2016%20juin.mp3.mp3" },
            { t: "EMISSION 31 09 Juin", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2031%2009%20juin.mp3" },
            { t: "EMISSION 30 02 Juin", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2030%2002%20juin.mp3" },
            { t: "EMISSION 29 26 Mai", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2029%2026%20mai.mp3" },
            { t: "EMISSION 28 12 Mai", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2028%2012%20mai.mp3" },
            { t: "EMISSION 27 05 Mai", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2027%2005mai.mp3" },
            { t: "EMISSION 26 28 Avril", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2026%2028%20avril.mp3" },
            { t: "EMISSION 25 21 Avril", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2025%2021%20avril.mp3" },
            { t: "EMISSION 24 14 Avril", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2024%2014%20avril.mp3" },
            { t: "EMISSION 23 07 Avril", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2023%2007%20avril.mp3" },
            { t: "EMISSION 22 31 Mars", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2022%2031%20mars.mp3" },
            { t: "EMISSION 21 24 Mars", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2021%2024%20mars.mp3" },
            { t: "EMISSION 20 17 Mars", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2020%2017mars.mp3" },
            { t: "EMISSION 18 03 Mars", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2018%2003mars.mp3" },
            { t: "EMISSION 17 24 Fev", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2017%2024%20fev.mp3" },
            { t: "EMISSION 16 17 Fev", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2016%2017%20fev.mp3" },
            { t: "EMISSION 15 10 Fev", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2015%2010%20fev.mp3" },
            { t: "EMISSION 14 03 Fev", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2014%2003%20fev.mp3" },
            { t: "EMISSION 13 27 Janv", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2013%2027%20janv.mp3" },
            { t: "EMISSION 12 13 Janv", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2012%2013%20janv.mp3" },
            { t: "EMISSION 11 06 Janv", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2011%206%20janv.mp3" },
            { t: "EMISSION 10 30 Dec", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2010%2030%20dec.mp3" },
            { t: "EMISSION 09 23 Dec", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2009%2023%20dec.mp3" },
            { t: "EMISSION 08 16 Dec", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2008%2016%20dec.mp3" },
            { t: "EMISSION 07 09 Dec", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2007%209%20dec.mp3" },
            { t: "EMISSION 06 02 Dec", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2006%202%20dec.mp3" },
            { t: "EMISSION 05 25 Nov", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2005%2025%20nov.mp3" },
            { t: "EMISSION 04 18 Nov", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2004%2018%20nov.mp3" },
            { t: "EMISSION 03 11 Nov", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2003%2011%20nov.mp3" },
            { t: "EMISSION 02 04 Nov", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2002%204%20nov.mp3" },
            { t: "EMISSION 01 28 Oct", u: "http://dopenessselecta.free.fr/mp3/dopeness%20selecta%2001%2028%20oct.mp3" }
        ];

        // --- 2. LOGIC ---
        const audio = document.getElementById('audio');
        const playBtn = document.getElementById('playBtn');
        const progressBar = document.getElementById('progressBar');
        const currTimeLabel = document.getElementById('currTime');
        const totTimeLabel = document.getElementById('totTime');
        const trackTable = document.getElementById('trackTable');
        const titleLabel = document.getElementById('currentTitle');
        const statusLabel = document.getElementById('playStatus');

        let currentIdx = -1;
        let isDragging = false;

        // Initialize Playlist
        function init() {
            trackTable.innerHTML = '';
            tracks.forEach((track, index) => {
                const tr = document.createElement('tr');
                tr.id = `track-${index}`;
                tr.onclick = () => loadTrack(index);
                tr.innerHTML = `
                    <td class="track-num">${tracks.length - index}</td>
                    <td class="track-title">${track.t}</td>
                `;
                trackTable.appendChild(tr);
            });
        }

        function loadTrack(index) {
            // Bounds check
            if (index < 0) index = tracks.length - 1;
            if (index >= tracks.length) index = 0;
            
            // Visual Updates
            if (currentIdx !== -1) {
                document.getElementById(`track-${currentIdx}`).classList.remove('active');
            }
            currentIdx = index;
            document.getElementById(`track-${currentIdx}`).classList.add('active');
            
            // Audio Updates
            audio.src = tracks[index].u;
            titleLabel.innerText = tracks[index].t;
            statusLabel.innerText = "Loading...";
            
            audio.play().catch(e => {
                console.error("Autoplay failed:", e);
                statusLabel.innerText = "Ready to Play";
                playBtn.innerText = "‚ñ∂";
            });
        }

        function togglePlay() {
            if (currentIdx === -1) {
                loadTrack(0);
                return;
            }
            
            if (audio.paused) {
                audio.play();
            } else {
                audio.pause();
            }
        }

        // --- Event Listeners ---
        
        audio.addEventListener('play', () => {
            playBtn.innerText = "‚è∏";
            statusLabel.innerText = "Playing";
            playBtn.style.paddingLeft = "0"; // center pause icon
        });
        
        audio.addEventListener('pause', () => {
            playBtn.innerText = "‚ñ∂";
            statusLabel.innerText = "Paused";
            playBtn.style.paddingLeft = "2px"; // center play icon
        });

        audio.addEventListener('ended', () => {
            playNext();
        });

        audio.addEventListener('timeupdate', () => {
            if (isDragging) return;
            const cur = audio.currentTime;
            const dur = audio.duration;
            
            if (!isNaN(dur)) {
                const pct = (cur / dur) * 100;
                progressBar.value = pct;
                currTimeLabel.innerText = formatTime(cur);
                totTimeLabel.innerText = formatTime(dur);
                // Update gradient for progress bar
                progressBar.style.background = `linear-gradient(to right, #1db954 0%, #1db954 ${pct}%, #535353 ${pct}%, #535353 100%)`;
            }
        });

        // Skip Buttons (+/- 1 min)
        function skip(seconds) {
            audio.currentTime += seconds;
        }

        function playNext() { loadTrack(currentIdx + 1); }
        function playPrev() { loadTrack(currentIdx - 1); }

        // Progress Bar Interaction
        function seek() {
            const dur = audio.duration;
            if (!isNaN(dur)) {
                audio.currentTime = (progressBar.value / 100) * dur;
            }
        }
        
        // Handle dragging behavior for smoother slider
        progressBar.addEventListener('mousedown', () => isDragging = true);
        progressBar.addEventListener('mouseup', () => isDragging = false);
        progressBar.addEventListener('touchstart', () => isDragging = true);
        progressBar.addEventListener('touchend', () => isDragging = false);

        function formatTime(s) {
            if (isNaN(s)) return "0:00";
            const min = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return `${min}:${sec < 10 ? '0' : ''}${sec}`;
        }

        // --- Run ---
        init();

    </script>
</body>
</html>
